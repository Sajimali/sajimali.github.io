<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sajku1 Store - Dashboard</title>
  <link rel="stylesheet" href="styles.css"> <!-- Add your CSS file -->
  <script src="https://www.gstatic.com/firebasejs/11.6.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.6.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.6.0/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.6.0/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/11.6.0/firebase-storage-compat.js"></script>
</head>
<body>
  <!-- Your dashboard HTML content here -->
  <h1>Welcome to Sajku1 Store Dashboard</h1>
  <div id="profile">
    <h2>Your Profile</h2>
    <img id="profile-pic" src="" alt="Profile Picture">
    <p id="user-name"></p>
    <button onclick="changeProfilePic()">Change Picture</button>
    <button onclick="changeUserName()">Change Name</button>
  </div>

  <!-- Upload/Download Section -->
  <div id="app-upload">
    <h2>Upload Your App</h2>
    <input type="file" id="apk-file" accept=".apk">
    <input type="text" id="app-name" placeholder="App Name">
    <textarea id="app-description" placeholder="App Description"></textarea>
    <input type="file" id="app-screenshot" accept="image/*">
    <input type="text" id="admob-banner" placeholder="AdMob Banner Code">
    <input type="text" id="admob-interstitial" placeholder="AdMob Interstitial Code">
    <input type="text" id="admob-rewarded" placeholder="AdMob Rewarded Code">
    <input type="text" id="admob-native" placeholder="AdMob Native Code">
    <input type="text" id="admob-appopen" placeholder="AdMob App Open Code">
    <button onclick="uploadApp()">Upload</button>
  </div>

  <div id="user-earnings">
    <h2>Your Earnings</h2>
    <div id="total-earnings"></div>
  </div>

  <div id="admin-section">
    <h2>Admin Section (Password Protected)</h2>
    <input type="password" id="admin-password" placeholder="Enter Admin Password">
    <button onclick="unlockAdmin()">Unlock Admin</button>
    <div id="system-earnings">
      <h3>System Earnings</h3>
      <div id="system-earnings-details"></div>
    </div>
  </div>

  <!-- Firebase Config -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCO6p2DX7cb19ELNHbsDl0ZRQ7kgMvUzGs",
      authDomain: "sajku-store.firebaseapp.com",
      projectId: "sajku-store",
      storageBucket: "sajku-store.appspot.com",
      messagingSenderId: "831227140840",
      appId: "1:831227140840:web:634cc6248ead6ab186075d",
      measurementId: "G-BDH8FP9R56",
      databaseURL: "https://sajku-store-default-rtdb.firebaseio.com"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    const storage = firebase.storage();
  </script>

  <!-- Firebase Authentication and Database Logic -->
  <script>
    firebase.auth().onAuthStateChanged(user => {
      if (user) {
        localStorage.setItem("userID", user.uid);
        // Fetch user profile data
        db.collection("users").doc(user.uid).get().then(doc => {
          document.getElementById('user-name').innerText = doc.data().name;
          document.getElementById('profile-pic').src = doc.data().photoURL;
        });
      }
    });

    function changeProfilePic() {
      // Logic to change profile picture
    }

    function changeUserName() {
      // Logic to change user name
    }

    function uploadApp() {
      const appName = document.getElementById("app-name").value;
      const appDescription = document.getElementById("app-description").value;
      const apkFile = document.getElementById("apk-file").files[0];
      const screenshot = document.getElementById("app-screenshot").files[0];
      const admobBanner = document.getElementById("admob-banner").value || "ca-app-pub-5534254536913287/6837788351";
      const admobInterstitial = document.getElementById("admob-interstitial").value || "ca-app-pub-5534254536913287/6044824702";
      const admobRewarded = document.getElementById("admob-rewarded").value || "ca-app-pub-5534254536913287/7212596405";
      const admobNative = document.getElementById("admob-native").value || "ca-app-pub-5534254536913287/3273351397";
      const admobAppOpen = document.getElementById("admob-appopen").value || "ca-app-pub-5534254536913287/7021024718";

      // Upload APK to Firebase Storage
      const storageRef = storage.ref('apps/' + appName + '.apk');
      storageRef.put(apkFile).then(snapshot => {
        storageRef.getDownloadURL().then(url => {
          // Save app details in Firestore
          db.collection("apps").add({
            appName: appName,
            description: appDescription,
            apkUrl: url,
            screenshots: screenshot ? screenshot.name : "no-screenshot",
            admobBanner: admobBanner,
            admobInterstitial: admobInterstitial,
            admobRewarded: admobRewarded,
            admobNative: admobNative,
            admobAppOpen: admobAppOpen,
            uploaderId: firebase.auth().currentUser.uid
          }).then(() => {
            alert("App uploaded successfully!");
          }).catch(error => {
            alert("Error uploading app: " + error.message);
          });
        });
      });
    }

    function unlockAdmin() {
      const password = document.getElementById("admin-password").value;
      if (password === "admin123") {
        document.getElementById("system-earnings").style.display = "block";
        // Fetch system earnings
        db.collection("systemEarnings").get().then(snapshot => {
          snapshot.forEach(doc => {
            document.getElementById("system-earnings-details").innerText = "Total System Earnings: " + doc.data().totalEarnings;
          });
        });
      } else {
        alert("Incorrect password");
      }
    }
  </script>
</body>
</html>

        


  
